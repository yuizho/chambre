<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2160px" preserveAspectRatio="none" style="width:1081px;height:2160px;" version="1.1" viewBox="0 0 1081 2160" width="1081px" zoomAndPan="magnify"><defs><filter height="300%" id="fzyif92sgktr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#90EE90" height="2145.5366" style="stroke: #A80036; stroke-width: 1.0;" width="627" x="162.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="443" y="17.897">endpoints</text><rect fill="#ADD8E6" height="2145.5366" style="stroke: #A80036; stroke-width: 1.0;" width="167" x="791.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="865" y="17.897">sse</text><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="331.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="818.5" y="1059.4243"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="218.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="818.5" y="1512.5844"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="1511.9286" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903" y="539.5401"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="50.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="908" y="2000.7627"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="722.8082" style="stroke: #000000; stroke-width: 2.0;" width="1046" x="13" y="1016.0123"/><rect fill="#FFFFFF" height="266.924" style="stroke: none; stroke-width: 1.0;" width="1046" x="13" y="1471.8965"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="41" x2="41" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="84" x2="84" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="190.5" x2="190.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="397" x2="397" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="512.5" x2="512.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="682.5" x2="682.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="757.5" x2="757.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="823.5" x2="823.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="907.5" x2="907.5" y1="89.0679" y2="2060.4687"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1029" x2="1029" y1="89.0679" y2="2060.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="23" y="84.9659">user</text><ellipse cx="41" cy="13" fill="#FEFECE" filter="url(#fzyif92sgktr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41,21 L41,48 M28,29 L54,29 M41,48 L28,63 M41,48 L54,63 " fill="none" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="23" y="2074.4346">user</text><ellipse cx="41" cy="2088.5366" fill="#FEFECE" filter="url(#fzyif92sgktr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M41,2096.5366 L41,2123.5366 M28,2104.5366 L54,2104.5366 M41,2123.5366 L28,2138.5366 M41,2123.5366 L54,2138.5366 " fill="none" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="70" y="84.9659">gm</text><ellipse cx="84" cy="13" fill="#FEFECE" filter="url(#fzyif92sgktr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M84,21 L84,48 M71,29 L97,29 M84,48 L71,63 M84,48 L97,63 " fill="none" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="22" x="70" y="2074.4346">gm</text><ellipse cx="84" cy="2088.5366" fill="#FEFECE" filter="url(#fzyif92sgktr)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M84,2096.5366 L84,2123.5366 M71,2104.5366 L97,2104.5366 M84,2123.5366 L71,2138.5366 M84,2123.5366 L97,2138.5366 " fill="none" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="166.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="173.5" y="72.9659">auth</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="166.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="173.5" y="2081.4346">auth</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="367" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="374" y="72.9659">create</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="367" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="374" y="2081.4346">create</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="485.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="492.5" y="72.9659">apply</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="485.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="492.5" y="2081.4346">apply</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="646.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="653.5" y="72.9659">approve</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="646.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="653.5" y="2081.4346">approve</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="729.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="736.5" y="72.9659">reject</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="729.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="736.5" y="2081.4346">reject</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="795.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="802.5" y="72.9659">notify</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="795.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="802.5" y="2081.4346">notify</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="861.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="868.5" y="72.9659">auth_notify</text><rect fill="#FEFECE" filter="url(#fzyif92sgktr)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="861.5" y="2059.4687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="868.5" y="2081.4346">auth_notify</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="1009" y="84.9659">redis</text><path d="M1011,34 C1011,24 1029,24 1029,24 C1029,24 1047,24 1047,34 L1047,60 C1047,70 1029,70 1029,70 C1029,70 1011,70 1011,60 L1011,34 " fill="#FEFECE" filter="url(#fzyif92sgktr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1011,34 C1011,44 1029,44 1029,44 C1029,44 1047,44 1047,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="1009" y="2074.4346">redis</text><path d="M1011,2088.5366 C1011,2078.5366 1029,2078.5366 1029,2078.5366 C1029,2078.5366 1047,2078.5366 1047,2088.5366 L1047,2114.5366 C1047,2124.5366 1029,2124.5366 1029,2124.5366 C1029,2124.5366 1011,2124.5366 1011,2114.5366 L1011,2088.5366 " fill="#FEFECE" filter="url(#fzyif92sgktr)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1011,2088.5366 C1011,2098.5366 1029,2098.5366 1029,2098.5366 C1029,2098.5366 1047,2098.5366 1047,2088.5366 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="331.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="818.5" y="1059.4243"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="218.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="818.5" y="1512.5844"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="1511.9286" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="903" y="539.5401"/><rect fill="#FFFFFF" filter="url(#fzyif92sgktr)" height="50.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="908" y="2000.7627"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="120.9209" y2="120.9209"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="123.9209" y2="123.9209"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="98" x="487" y="109.0679"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="493" y="126.9649">create room</text><polygon fill="#A80036" points="385,164.4799,395,168.4799,385,172.4799,389,168.4799" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="391" y1="168.4799" y2="168.4799"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="91" y="162.6709">user_name, room_name</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="397" x2="439" y1="200.186" y2="200.186"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="439" x2="439" y1="200.186" y2="213.186"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="398" x2="439" y1="213.186" y2="213.186"/><polygon fill="#A80036" points="408,209.186,398,213.186,408,217.186,404,213.186" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="404" y="194.377">check something</text><polygon fill="#A80036" points="1017,240.892,1027,244.892,1017,248.892,1021,244.892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="397" x2="1023" y1="244.892" y2="244.892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="404" y="239.083">create room and add gm</text><polygon fill="#A80036" points="95,272.598,85,276.598,95,280.598,91,276.598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89" x2="396" y1="276.598" y2="276.598"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="101" y="270.789">room_id, auth_token, room_url, room_password</text><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="306.451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="306.451" y2="306.451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="309.451" y2="309.451"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="142" x="465" y="294.598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="471" y="312.495">gm authentication</text><polygon fill="#A80036" points="179,350.01,189,354.01,179,358.01,183,354.01" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="185" y1="354.01" y2="354.01"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="91" y="348.201">auth_token</text><polygon fill="#A80036" points="1017,381.716,1027,385.716,1017,389.716,1021,385.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="1023" y1="385.716" y2="385.716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="198" y="379.907">fetch user</text><polygon fill="#A80036" points="202,395.716,192,399.716,202,403.716,198,399.716" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="1028" y1="399.716" y2="399.716"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="233" y1="431.4221" y2="431.4221"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233" x2="233" y1="431.4221" y2="444.4221"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="192" x2="233" y1="444.4221" y2="444.4221"/><polygon fill="#A80036" points="202,440.4221,192,444.4221,202,448.4221,198,444.4221" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="198" y="425.6131">check the user</text><polygon fill="#A80036" points="1017,472.1281,1027,476.1281,1017,480.1281,1021,476.1281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="1023" y1="476.1281" y2="476.1281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="198" y="470.3191">save session_info</text><polygon fill="#A80036" points="95,503.8341,85,507.8341,95,511.8341,91,507.8341" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89" x2="190" y1="507.8341" y2="507.8341"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="101" y="502.0251">setcookie ssid</text><polygon fill="#0000FF" points="891,535.5401,901,539.5401,891,543.5401,895,539.5401" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="84" x2="897" y1="539.5401" y2="539.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="91" y="533.7311">create sse session with session</text><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="569.3931"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="569.3931" y2="569.3931"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="572.3931" y2="572.3931"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="52" x="510" y="557.5401"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="516" y="575.4371">apply</text><polygon fill="#A80036" points="501,612.9521,511,616.9521,501,620.9521,505,616.9521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="507" y1="616.9521" y2="616.9521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="48" y="611.1431">user_name, room_id, password</text><polygon fill="#A80036" points="1017,644.6582,1027,648.6582,1017,652.6582,1021,648.6582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="1023" y1="648.6582" y2="648.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="520" y="642.8492">fetch room</text><polygon fill="#A80036" points="524,658.6582,514,662.6582,524,666.6582,520,662.6582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="518" x2="1028" y1="662.6582" y2="662.6582"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="555" y1="694.3642" y2="694.3642"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555" x2="555" y1="694.3642" y2="707.3642"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="555" y1="707.3642" y2="707.3642"/><polygon fill="#A80036" points="524,703.3642,514,707.3642,524,711.3642,520,707.3642" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="520" y="688.5552">check room, password</text><polygon fill="#A80036" points="1017,735.0702,1027,739.0702,1017,743.0702,1021,739.0702" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="1023" y1="739.0702" y2="739.0702"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="520" y="733.2612">fetch unapprovedUser</text><polygon fill="#A80036" points="524,749.0702,514,753.0702,524,757.0702,520,753.0702" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="518" x2="1028" y1="753.0702" y2="753.0702"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="555" y1="784.7762" y2="784.7762"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555" x2="555" y1="784.7762" y2="797.7762"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="555" y1="797.7762" y2="797.7762"/><polygon fill="#A80036" points="524,793.7762,514,797.7762,524,801.7762,520,797.7762" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="520" y="778.9672">check the user has entried</text><polygon fill="#A80036" points="1017,825.4822,1027,829.4822,1017,833.4822,1021,829.4822" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="1023" y1="829.4822" y2="829.4822"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="520" y="823.6732">add user to unapprovedUser</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="513" x2="555" y1="861.1882" y2="861.1882"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555" x2="555" y1="861.1882" y2="874.1882"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514" x2="555" y1="874.1882" y2="874.1882"/><polygon fill="#A80036" points="524,870.1882,514,874.1882,524,878.1882,520,874.1882" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="520" y="855.3792">generate user_id</text><polygon fill="#0000FF" points="1017,901.8943,1027,905.8943,1017,909.8943,1021,905.8943" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="513" x2="1023" y1="905.8943" y2="905.8943"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="520" y="900.0853">push apply event</text><polygon fill="#0000FF" points="924,933.6003,914,937.6003,924,941.6003,920,937.6003" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="918" x2="1028" y1="937.6003" y2="937.6003"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="930" y="931.7913">push user info</text><polygon fill="#A80036" points="52,965.3063,42,969.3063,52,973.3063,48,969.3063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="512" y1="969.3063" y2="969.3063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="58" y="963.4973">user_id</text><polygon fill="#0000FF" points="95,997.0123,85,1001.0123,95,1005.0123,91,1001.0123" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="89" x2="902" y1="1001.0123" y2="1001.0123"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="101" y="995.2033">user info</text><path d="M13,1016.0123 L76,1016.0123 L76,1025.0123 L66,1035.0123 L13,1035.0123 L13,1016.0123 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="722.8082" style="stroke: #000000; stroke-width: 2.0;" width="1046" x="13" y="1016.0123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="28" y="1030.9093">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="91" y="1029.7712">[approve]</text><polygon fill="#0000FF" points="806.5,1055.4243,816.5,1059.4243,806.5,1063.4243,810.5,1059.4243" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="41" x2="812.5" y1="1059.4243" y2="1059.4243"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="48" y="1053.6153">create sse session with fingerprint</text><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="1089.2774"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1089.2774" y2="1089.2774"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1092.2774" y2="1092.2774"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="74" x="499" y="1077.4243"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="505" y="1095.3214">approval</text><polygon fill="#A80036" points="671,1132.8364,681,1136.8364,671,1140.8364,675,1136.8364" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="677" y1="1136.8364" y2="1136.8364"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="91" y="1131.0274">approve the user with userId, userName</text><polygon fill="#A80036" points="1017,1164.5424,1027,1168.5424,1017,1172.5424,1021,1168.5424" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="1023" y1="1168.5424" y2="1168.5424"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="690" y="1162.7334">add user to room</text><polygon fill="#A80036" points="1017,1196.2484,1027,1200.2484,1017,1204.2484,1021,1200.2484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="1023" y1="1200.2484" y2="1200.2484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="690" y="1194.4394">save auth info</text><polygon fill="#0000FF" points="1017,1245.6604,1027,1249.6604,1017,1253.6604,1021,1249.6604" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="683" x2="1023" y1="1249.6604" y2="1249.6604"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="690" y="1226.1454">push the auth token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="690" y="1243.8514">to approved user</text><polygon fill="#0000FF" points="1017,1277.3665,1027,1281.3665,1017,1285.3665,1021,1281.3665" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="683" x2="1023" y1="1281.3665" y2="1281.3665"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="690" y="1275.5575">push notify to all</text><polygon fill="#A80036" points="95,1291.3665,85,1295.3665,95,1299.3665,91,1295.3665" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89" x2="682" y1="1295.3665" y2="1295.3665"/><polygon fill="#0000FF" points="839.5,1323.0725,829.5,1327.0725,839.5,1331.0725,835.5,1327.0725" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="833.5" x2="1028" y1="1327.0725" y2="1327.0725"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="845.5" y="1321.2635">notify approved</text><polygon fill="#0000FF" points="924,1354.7785,914,1358.7785,924,1362.7785,920,1358.7785" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="918" x2="1028" y1="1358.7785" y2="1358.7785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="930" y="1352.9695">notify new user</text><polygon fill="#0000FF" points="52,1386.4845,42,1390.4845,52,1394.4845,48,1390.4845" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="46" x2="822.5" y1="1390.4845" y2="1390.4845"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="58" y="1384.6755">auth info</text><polygon fill="#0000FF" points="95,1418.1905,85,1422.1905,95,1426.1905,91,1422.1905" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="89" x2="902" y1="1422.1905" y2="1422.1905"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="101" y="1416.3815">user info</text><path d="M41,1435.1905 L41,1462.1905 L123,1462.1905 L123,1445.1905 L113,1435.1905 L41,1435.1905 " fill="#FBFB77" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M113,1435.1905 L113,1445.1905 L123,1445.1905 L113,1435.1905 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="47" y="1454.0875">show user</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1059" y1="1472.8965" y2="1472.8965"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="18" y="1484.6555">[reject]</text><polygon fill="#0000FF" points="806.5,1508.5844,816.5,1512.5844,806.5,1516.5844,810.5,1512.5844" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="41" x2="812.5" y1="1512.5844" y2="1512.5844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="48" y="1506.7754">create sse session with fingerprint</text><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="1542.4375"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1542.4375" y2="1542.4375"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1545.4375" y2="1545.4375"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="72" x="500" y="1530.5844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="506" y="1548.4815">rejected</text><polygon fill="#A80036" points="745.5,1585.9965,755.5,1589.9965,745.5,1593.9965,749.5,1589.9965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="751.5" y1="1589.9965" y2="1589.9965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="91" y="1584.1875">reject the user: userId</text><polygon fill="#A80036" points="1017,1617.7025,1027,1621.7025,1017,1625.7025,1021,1621.7025" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="757.5" x2="1023" y1="1621.7025" y2="1621.7025"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="764.5" y="1615.8935">remove the user from unapprovedUser</text><polygon fill="#0000FF" points="1017,1649.4085,1027,1653.4085,1017,1657.4085,1021,1653.4085" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="757.5" x2="1023" y1="1653.4085" y2="1653.4085"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="764.5" y="1647.5995">push rejected to the user</text><polygon fill="#A80036" points="95,1663.4085,85,1667.4085,95,1671.4085,91,1667.4085" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="89" x2="756.5" y1="1667.4085" y2="1667.4085"/><polygon fill="#0000FF" points="839.5,1695.1145,829.5,1699.1145,839.5,1703.1145,835.5,1699.1145" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="833.5" x2="1028" y1="1699.1145" y2="1699.1145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="845.5" y="1693.3055">notify rejected</text><polygon fill="#0000FF" points="52,1726.8205,42,1730.8205,52,1734.8205,48,1730.8205" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="46" x2="822.5" y1="1730.8205" y2="1730.8205"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="58" y="1725.0115">rejected</text><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1066" x="3" y="1767.6736"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1767.6736" y2="1767.6736"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1069" y1="1770.6736" y2="1770.6736"/><rect fill="#EEEEEE" filter="url(#fzyif92sgktr)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="150" x="461" y="1755.8205"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="467" y="1773.7176">user authentication</text><polygon fill="#A80036" points="179,1811.2326,189,1815.2326,179,1819.2326,183,1815.2326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41" x2="185" y1="1815.2326" y2="1815.2326"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="48" y="1809.4236">auth_token</text><polygon fill="#A80036" points="1017,1842.9386,1027,1846.9386,1017,1850.9386,1021,1846.9386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="1023" y1="1846.9386" y2="1846.9386"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="198" y="1841.1296">fetch user</text><polygon fill="#A80036" points="202,1856.9386,192,1860.9386,202,1864.9386,198,1860.9386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="1028" y1="1860.9386" y2="1860.9386"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="233" y1="1892.6446" y2="1892.6446"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="233" x2="233" y1="1892.6446" y2="1905.6446"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="192" x2="233" y1="1905.6446" y2="1905.6446"/><polygon fill="#A80036" points="202,1901.6446,192,1905.6446,202,1909.6446,198,1905.6446" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="198" y="1886.8356">check the user</text><polygon fill="#A80036" points="1017,1933.3506,1027,1937.3506,1017,1941.3506,1021,1937.3506" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="1023" y1="1937.3506" y2="1937.3506"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="198" y="1931.5416">save session_info</text><polygon fill="#A80036" points="52,1965.0566,42,1969.0566,52,1973.0566,48,1969.0566" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="46" x2="190" y1="1969.0566" y2="1969.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="58" y="1963.2476">setcookie ssid</text><polygon fill="#0000FF" points="896,1996.7627,906,2000.7627,896,2004.7627,900,2000.7627" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="41" x2="902" y1="2000.7627" y2="2000.7627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="48" y="1994.9537">create sse session with session</text><path d="M24,2013.7627 L24,2040.7627 L1045,2040.7627 L1045,2023.7627 L1035,2013.7627 L24,2013.7627 " fill="#FBFB77" filter="url(#fzyif92sgktr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1035,2013.7627 L1035,2023.7627 L1045,2023.7627 L1035,2013.7627 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="466.5" y="2032.6597">do some operation...</text><!--MD5=[4226c9927c0f7897ef9f5bbabca40fa2]
@startuml
actor user
actor gm

box "endpoints" #LightGreen
participant auth
participant create
participant apply
participant approve
participant reject
endbox

box  "sse" #LightBlue

participant notify
participant auth_notify
endbox
database redis

== create room ==
gm -> create: user_name, room_name
create -> create: check something
create -> redis: create room and add gm
create - -> gm: room_id, auth_token, room_url, room_password

== gm authentication ==
gm -> auth: auth_token
auth -> redis: fetch user
redis - -> auth
auth -> auth: check the user
auth -> redis: save session_info
auth - -> gm: setcookie ssid
gm -[#blue]> auth_notify: create sse session with session
activate  auth_notify

== apply ==
user -> apply: user_name, room_id, password
apply -> redis: fetch room
redis - -> apply
apply -> apply: check room, password
apply -> redis: fetch unapprovedUser
redis - -> apply
apply -> apply: check the user has entried
apply -> redis: add user to unapprovedUser
apply -> apply: generate user_id
apply -[#blue]> redis: push apply event
redis -[#blue]> auth_notify: push user info
apply - -> user: user_id
auth_notify -[#blue]> gm: user info

alt approve
user -[#blue]> notify: create sse session with fingerprint
activate notify
== approval ==
gm -> approve : approve the user with userId, userName
approve -> redis: add user to room
approve -> redis: save auth info
approve -[#blue]> redis: push the auth token\nto approved user
approve -[#blue]> redis: push notify to all
approve - -> gm
redis  -[#blue]> notify: notify approved
redis -[#blue]> auth_notify: notify new user
notify -[#blue]> user: auth info
deactivate notify
auth_notify -[#blue]> gm: user info
note over gm: show user 


else  reject
user -[#blue]> notify: create sse session with fingerprint
activate notify
== rejected ==
gm ->  reject: reject the user: userId
reject -> redis: remove the user from unapprovedUser
reject -[#blue]> redis: push rejected to the user
reject - -> gm
redis -[#blue]> notify: notify rejected
notify -[#blue]> user: rejected
deactivate notify
end

== user authentication ==
user -> auth: auth_token
auth -> redis: fetch user
redis - -> auth
auth -> auth: check the user
auth -> redis: save session_info
auth - -> user: setcookie ssid
user -[#blue]> auth_notify: create sse session with session
activate  auth_notify
note over user,redis: do some operation...

@enduml

PlantUML version 1.2020.10(Sun May 17 18:35:57 JST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10
Operating System: Linux
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>